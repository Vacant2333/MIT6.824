build s[0] peer's count [3]
build s[1] peer's count [3]
build s[2] peer's count [3]
Test (2A): initial election ...
s[1] start a election now
s[1] ask vote
s[0] update Term [0]->[1] by s[1] when RequestVote
s[2] update Term [0]->[1] by s[1] when RequestVote
s[0] be asked vote to [1] reply:&{1 true} args:&{1 1}
s[2] be asked vote to [1] reply:&{1 true} args:&{1 1}
s[1] ask vote resulttrue &{1 true}
s[1] ask vote resulttrue &{1 true}
L[1] is a Leader now
  ... Passed --   3.1  3   58   18998    0
s[0] dead now,role:[1],Term:[1]
s[1] dead now,role:[3],Term:[1]
s[2] dead now,role:[1],Term:[1]
build s[0] peer's count [3]
build s[1] peer's count [3]
build s[2] peer's count [3]
Test (2A): election after network failure ...
s[1] start a election now
s[1] ask vote
s[0] start a election now
s[2] start a election now
s[0] reject vote to [1],role:[2],votedFor:[0]
s[0] be asked vote to [1] reply:&{1 false} args:&{1 1}
s[2] ask vote
s[2] reject vote to [1],role:[2],votedFor:[2]
s[2] be asked vote to [1] reply:&{1 false} args:&{1 1}
s[1] ask vote resulttrue &{1 false}
s[0] ask vote
s[1] reject vote to [0],role:[2],votedFor:[1]
s[1] be asked vote to [0] reply:&{1 false} args:&{1 0}
s[0] reject vote to [2],role:[2],votedFor:[0]
s[0] be asked vote to [2] reply:&{1 false} args:&{1 2}
s[0] ask vote resulttrue &{1 false}
s[2] ask vote resulttrue &{1 false}
s[2] reject vote to [0],role:[2],votedFor:[2]
s[2] be asked vote to [0] reply:&{1 false} args:&{1 0}
s[0] ask vote resulttrue &{1 false}
s[1] ask vote resulttrue &{1 false}
s[1] reject vote to [2],role:[2],votedFor:[1]
s[1] be asked vote to [2] reply:&{1 false} args:&{1 2}
s[2] ask vote resulttrue &{1 false}
C[1] election time out
C[2] election time out
C[0] election time out
s[2] start a election now
s[1] start a election now
s[0] start a election now
s[2] ask vote
s[1] ask vote
s[0] ask vote
s[0] reject vote to [2],role:[2],votedFor:[0]
s[1] reject vote to [2],role:[2],votedFor:[1]
s[0] be asked vote to [2] reply:&{2 false} args:&{2 2}
s[1] be asked vote to [2] reply:&{2 false} args:&{2 2}
s[2] reject vote to [1],role:[2],votedFor:[2]
s[2] be asked vote to [1] reply:&{2 false} args:&{2 1}
s[2] reject vote to [0],role:[2],votedFor:[2]
s[2] be asked vote to [0] reply:&{2 false} args:&{2 0}
s[1] ask vote resulttrue &{2 false}
s[2] ask vote resulttrue &{2 false}
s[2] ask vote resulttrue &{2 false}
s[0] reject vote to [1],role:[2],votedFor:[0]
s[0] be asked vote to [1] reply:&{2 false} args:&{2 1}
s[1] reject vote to [0],role:[2],votedFor:[1]
s[1] be asked vote to [0] reply:&{2 false} args:&{2 0}
s[0] ask vote resulttrue &{2 false}
s[1] ask vote resulttrue &{2 false}
s[0] ask vote resulttrue &{2 false}
C[0] election time out
s[0] start a election now
s[0] ask vote
s[1] update Term [2]->[3] by s[0] when RequestVote
s[2] update Term [2]->[3] by s[0] when RequestVote
s[2] be asked vote to [0] reply:&{3 true} args:&{3 0}
s[1] be asked vote to [0] reply:&{3 true} args:&{3 0}
s[0] ask vote resulttrue &{3 true}
s[0] ask vote resulttrue &{3 true}
F[1] another server is Leader now
F[2] another server is Leader now
L[0] is a Leader now
s[0] dead now,role:[3],Term:[3]
s[1] dead now,role:[1],Term:[3]
s[2] dead now,role:[1],Term:[3]
--- FAIL: TestReElection2A (6.16s)
    config.go:461: expected one leader, got none
build s[0] peer's count [7]
build s[1] peer's count [7]
build s[2] peer's count [7]
build s[3] peer's count [7]
build s[4] peer's count [7]
build s[5] peer's count [7]
build s[6] peer's count [7]
Test (2A): multiple elections ...
s[2] start a election now
s[4] start a election now
s[4] ask vote
s[2] ask vote
s[1] update Term [0]->[1] by s[2] when RequestVote
s[0] update Term [0]->[1] by s[4] when RequestVote
s[1] be asked vote to [2] reply:&{1 true} args:&{1 2}
s[0] be asked vote to [4] reply:&{1 true} args:&{1 4}
s[5] update Term [0]->[1] by s[4] when RequestVote
s[5] be asked vote to [4] reply:&{1 true} args:&{1 4}
s[4] ask vote resulttrue &{1 true}
s[2] ask vote resulttrue &{1 true}
s[2] reject vote to [4],role:[2],votedFor:[2]
s[6] update Term [0]->[1] by s[2] when RequestVote
s[4] ask vote resulttrue &{1 true}
s[0] reject vote to [2],role:[1],votedFor:[4]
s[0] be asked vote to [2] reply:&{1 false} args:&{1 2}
s[4] reject vote to [2],role:[2],votedFor:[4]
s[3] update Term [0]->[1] by s[4] when RequestVote
s[3] be asked vote to [4] reply:&{1 true} args:&{1 4}
s[6] be asked vote to [2] reply:&{1 true} args:&{1 2}
s[2] be asked vote to [4] reply:&{1 false} args:&{1 4}
s[1] reject vote to [4],role:[1],votedFor:[2]
s[5] reject vote to [2],role:[1],votedFor:[4]
s[5] be asked vote to [2] reply:&{1 false} args:&{1 2}
s[6] reject vote to [4],role:[1],votedFor:[2]
s[6] be asked vote to [4] reply:&{1 false} args:&{1 4}
s[4] be asked vote to [2] reply:&{1 false} args:&{1 2}
s[4] ask vote resulttrue &{1 true}
s[4] ask vote resulttrue &{1 false}
s[1] be asked vote to [4] reply:&{1 false} args:&{1 4}
s[2] ask vote resulttrue &{1 false}
s[2] ask vote resulttrue &{1 false}
s[3] reject vote to [2],role:[1],votedFor:[4]
s[3] be asked vote to [2] reply:&{1 false} args:&{1 2}
s[2] ask vote resulttrue &{1 true}
s[2] ask vote resulttrue &{1 false}
s[4] ask vote resulttrue &{1 false}
s[4] ask vote resulttrue &{1 false}
s[2] ask vote resulttrue &{1 false}
L[4] is a Leader now
F[2] another server is Leader now
2A.3 test round[1] start
s[0] start a election now
s[0] ask vote
s[1] update Term [1]->[2] by s[0] when RequestVote
s[1] be asked vote to [0] reply:&{2 true} args:&{2 0}
s[2] update Term [1]->[2] by s[0] when RequestVote
s[2] be asked vote to [0] reply:&{2 true} args:&{2 0}
s[3] update Term [1]->[2] by s[0] when RequestVote
s[3] be asked vote to [0] reply:&{2 true} args:&{2 0}
s[0] ask vote resulttrue &{2 true}
s[0] ask vote resulttrue &{2 true}
s[0] ask vote resulttrue &{2 true}
L[0] is a Leader now
s[5] start a election now
s[6] start a election now
s[5] ask vote
s[6] ask vote
s[5] ask vote resultfalse &{0 false}
2A.3 test round[2] start
C[5] election time out
C[6] election time out
s[6] start a election now
s[6] ask vote
s[6] ask vote resultfalse &{0 false}
s[2] start a election now
s[2] ask vote
C[6] election time out
s[6] start a election now
s[6] ask vote
2A.3 test round[3] start
s[6] ask vote resultfalse &{0 false}
C[2] election time out
s[2] start a election now
s[4] start a election now
s[2] ask vote
s[4] ask vote
s[1] update Term [2]->[5] by s[4] when RequestVote
s[1] be asked vote to [4] reply:&{5 true} args:&{5 4}
s[1] reject vote to [2],role:[1],votedFor:[4]
s[1] be asked vote to [2] reply:&{5 false} args:&{4 2}
s[6] update Term [4]->[5] by s[4] when RequestVote
s[6] be asked vote to [4] reply:&{5 true} args:&{5 4}
s[6] reject vote to [2],role:[1],votedFor:[4]
s[4] reject vote to [2],role:[2],votedFor:[4]
s[4] be asked vote to [2] reply:&{5 false} args:&{4 2}
s[2] update Term [4]->[5] by s[4] when RequestVote
s[2] be asked vote to [4] reply:&{5 true} args:&{5 4}
s[5] update Term [2]->[4] by s[2] when RequestVote
s[5] be asked vote to [2] reply:&{4 true} args:&{4 2}
s[5] update Term [4]->[5] by s[4] when RequestVote
s[5] be asked vote to [4] reply:&{5 true} args:&{5 4}
s[6] be asked vote to [2] reply:&{5 false} args:&{4 2}
s[2] ask vote resulttrue &{5 false}
s[4] ask vote resulttrue &{5 true}
s[2] ask vote resulttrue &{5 false}
s[4] ask vote resulttrue &{5 true}
s[4] ask vote resulttrue &{5 true}
s[2] ask vote resulttrue &{4 true}
s[4] ask vote resulttrue &{5 true}
s[2] ask vote resulttrue &{5 false}
s[0] ask vote resultfalse &{0 false}
F[2] another server is Leader now
L[4] is a Leader now
F[6] another server is Leader now
s[5] ask vote resultfalse &{0 false}
s[6] ask vote resultfalse &{0 false}
s[3] start a election now
s[3] ask vote
2A.3 test round[4] start
s[4] ask vote resultfalse &{0 false}
s[5] ask vote resultfalse &{0 false}
s[0] trans to Follower by L[4] when receive AppendEntries
s[0] ask vote resultfalse &{0 false}
F[0] is not a leader now!
s[2] start a election now
s[2] ask vote
C[3] election time out
s[3] start a election now
s[6] start a election now
s[3] ask vote
s[6] ask vote
s[6] ask vote resultfalse &{0 false}
2A.3 test round[5] start
s[6] ask vote resultfalse &{0 false}
s[3] ask vote resultfalse &{0 false}
C[2] election time out
s[2] start a election now
s[2] ask vote
s[3] update Term [4]->[7] by s[2] when RequestVote
s[3] be asked vote to [2] reply:&{7 true} args:&{7 2}
s[5] update Term [5]->[7] by s[2] when RequestVote
s[5] be asked vote to [2] reply:&{7 true} args:&{7 2}
s[6] update Term [6]->[7] by s[2] when RequestVote
s[6] be asked vote to [2] reply:&{7 true} args:&{7 2}
s[0] update Term [5]->[7] by s[2] when RequestVote
s[0] be asked vote to [2] reply:&{7 true} args:&{7 2}
s[2] ask vote resulttrue &{7 true}
s[2] ask vote resulttrue &{7 true}
s[2] ask vote resulttrue &{7 true}
s[2] ask vote resulttrue &{7 true}
F[6] another server is Leader now
F[3] another server is Leader now
L[2] is a Leader now
s[1] start a election now
s[1] ask vote
s[6] ask vote resultfalse &{0 false}
s[1] ask vote resultfalse &{0 false}
s[6] ask vote resultfalse &{0 false}
2A.3 test round[6] start
s[3] ask vote resultfalse &{0 false}
s[4] start a election now
s[4] ask vote
s[1] update Term [6]->[8] by s[4] when RequestVote
s[1] be asked vote to [4] reply:&{8 true} args:&{8 4}
s[3] update Term [7]->[8] by s[4] when RequestVote
s[3] be asked vote to [4] reply:&{8 true} args:&{8 4}
s[2] update Term [7]->[8] by s[4] when RequestVote
s[2] be asked vote to [4] reply:&{8 true} args:&{8 4}
s[4] ask vote resulttrue &{8 true}
s[6] update Term [7]->[8] by s[4] when RequestVote
s[6] be asked vote to [4] reply:&{8 true} args:&{8 4}
s[4] ask vote resulttrue &{8 true}
s[4] ask vote resulttrue &{8 true}
s[4] ask vote resulttrue &{8 true}
s[2] ask vote resultfalse &{0 false}
F[4] is not a leader now!
F[1] another server is Leader now
s[3] ask vote resultfalse &{0 false}
F[2] is not a leader now!
L[4] is a Leader now
s[1] ask vote resultfalse &{0 false}
s[2] ask vote resultfalse &{0 false}
s[2] ask vote resultfalse &{0 false}
s[2] ask vote resultfalse &{0 false}
s[5] start a election now
s[5] ask vote
s[0] start a election now
s[0] ask vote
s[2] ask vote resultfalse &{0 false}
2A.3 test round[7] start
s[6] ask vote resultfalse &{0 false}
s[6] ask vote resultfalse &{0 false}
C[5] election time out
C[0] election time out
s[5] start a election now
s[5] ask vote
s[0] update Term [8]->[9] by s[5] when RequestVote
s[0] be asked vote to [5] reply:&{9 true} args:&{9 5}
s[1] update Term [8]->[9] by s[5] when RequestVote
s[1] be asked vote to [5] reply:&{9 true} args:&{9 5}
s[3] update Term [8]->[9] by s[5] when RequestVote
s[3] be asked vote to [5] reply:&{9 true} args:&{9 5}
s[5] ask vote resulttrue &{9 true}
s[5] ask vote resulttrue &{9 true}
s[5] ask vote resulttrue &{9 true}
L[5] is a Leader now
s[0] ask vote resultfalse &{0 false}
s[4] ask vote resultfalse &{0 false}
s[5] ask vote resultfalse &{0 false}
s[6] start a election now
s[6] ask vote
s[3] ask vote resultfalse &{0 false}
s[2] start a election now
s[2] ask vote
s[2] ask vote resultfalse &{0 false}
s[6] ask vote resultfalse &{0 false}
2A.3 test round[8] start
F[2] another server is Leader now
s[5] ask vote resultfalse &{0 false}
F[6] another server is Leader now
s[6] ask vote resultfalse &{0 false}
s[2] ask vote resultfalse &{0 false}
s[6] ask vote resultfalse &{0 false}
s[2] ask vote resultfalse &{0 false}
s[3] start a election now
s[3] ask vote
s[2] ask vote resultfalse &{0 false}
s[2] ask vote resultfalse &{0 false}
2A.3 test round[9] start
s[3] ask vote resultfalse &{0 false}
s[6] ask vote resultfalse &{0 false}
s[4] start a election now
s[4] ask vote
s[3] update Term [10]->[11] by s[4] when RequestVote
s[3] be asked vote to [4] reply:&{11 true} args:&{11 4}
s[5] update Term [9]->[11] by s[4] when RequestVote
s[6] update Term [9]->[11] by s[4] when RequestVote
s[5] be asked vote to [4] reply:&{11 true} args:&{11 4}
s[6] be asked vote to [4] reply:&{11 true} args:&{11 4}
s[4] ask vote resulttrue &{11 true}
s[4] ask vote resulttrue &{11 true}
s[4] ask vote resulttrue &{11 true}
F[3] another server is Leader now
F[5] is not a leader now!
L[4] is a Leader now
s[5] ask vote resultfalse &{0 false}
s[4] ask vote resultfalse &{0 false}
s[2] ask vote resultfalse &{0 false}
s[1] start a election now
s[1] ask vote
s[5] ask vote resultfalse &{0 false}
s[6] ask vote resultfalse &{0 false}
s[1] ask vote resultfalse &{0 false}
s[2] start a election now
s[0] start a election now
s[2] ask vote
s[0] ask vote
s[6] ask vote resultfalse &{0 false}
s[0] trans to Follower by L[4] when receive AppendEntries
s[1] trans to Follower by L[4] when receive AppendEntries
s[2] trans to Follower by L[4] when receive AppendEntries
F[0] another server is Leader now
F[2] another server is Leader now
F[1] another server is Leader now
s[6] ask vote resultfalse &{0 false}
s[1] ask vote resultfalse &{0 false}
s[3] ask vote resultfalse &{0 false}
s[2] ask vote resultfalse &{0 false}
  ... Passed --   5.6  7  936  242488    0
s[0] dead now,role:[1],Term:[11]
s[1] dead now,role:[1],Term:[11]
s[2] dead now,role:[1],Term:[11]
s[3] dead now,role:[1],Term:[11]
s[4] dead now,role:[3],Term:[11]
s[5] dead now,role:[1],Term:[11]
s[6] dead now,role:[1],Term:[11]
FAIL
exit status 1
FAIL	mit6.824/raft	14.962s
